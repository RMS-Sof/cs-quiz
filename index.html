<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS Quiz Application</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            width: 90%;
            max-width: 800px;
            min-height: 500px;
        }

        .login-form, .quiz-container, .results-container {
            padding: 40px;
            text-align: center;
        }

        .login-form h2, .quiz-header h2 {
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e1e1;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .quiz-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            margin: -40px -40px 30px -40px;
        }

        .quiz-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .timer {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 18px;
            font-weight: bold;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e1e1e1;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .question-container {
            text-align: left;
            margin-bottom: 30px;
        }

        .question {
            font-size: 20px;
            color: #333;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .options {
            list-style: none;
        }

        .option {
            background: #f8f9fa;
            margin: 10px 0;
            border-radius: 8px;
            transition: all 0.3s;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .option:hover {
            background: #e9ecef;
            border-color: #667eea;
        }

        .option.selected {
            background: #667eea;
            color: white;
            border-color: #5a6fd8;
        }

        .option-content {
            padding: 15px 20px;
            display: flex;
            align-items: center;
        }

        .option-letter {
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }

        .option.selected .option-letter {
            background: white;
            color: #667eea;
        }

        .quiz-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .results-container {
            text-align: center;
        }

        .score-display {
            font-size: 3em;
            color: #667eea;
            font-weight: bold;
            margin: 20px 0;
        }

        .grade {
            font-size: 2em;
            margin: 20px 0;
            padding: 20px;
            border-radius: 10px;
        }

        .grade.excellent {
            background: #d4edda;
            color: #155724;
        }

        .grade.good {
            background: #d1ecf1;
            color: #0c5460;
        }

        .grade.average {
            background: #fff3cd;
            color: #856404;
        }

        .grade.poor {
            background: #f8d7da;
            color: #721c24;
        }

        .error-message {
            color: #dc3545;
            margin-top: 10px;
            font-size: 14px;
        }

        .hidden {
            display: none;
        }

        .subject-tag {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            margin-bottom: 10px;
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Login Page -->
        <div id="loginPage" class="login-form">
            <h2>CS Quiz Login </h2>
            	
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Username:</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password:</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="btn">Login</button>
                <div id="loginError" class="error-message hidden">Invalid username or password!</div>
            </form>
        </div>

        <!-- Quiz Page -->
        <div id="quizPage" class="quiz-container hidden">
            <div class="quiz-header">
                <h2>Computer Science Quiz</h2>
	        <h3>Designed by Prof. Rahul M. Samant |  HOD-IT, NBNSTIC.</h3>	
                <div class="quiz-info">
                    <div>Question <span id="currentQuestion">1</span> of 15</div>
                    <div class="timer" id="timer">30</div>
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div class="question-container">
                <div class="subject-tag" id="subjectTag"></div>
                <div class="question" id="questionText"></div>
                <ul class="options" id="optionsList"></ul>
            </div>

            <div class="quiz-controls">
                <button class="btn" id="prevBtn" onclick="previousQuestion()" disabled>Previous</button>
                <button class="btn" id="nextBtn" onclick="nextQuestion()">Next</button>
            </div>
        </div>

        <!-- Results Page -->
        <div id="resultsPage" class="results-container hidden">
            <h2>Quiz Complete!</h2>
            <div class="score-display" id="scoreDisplay"></div>
            <div class="grade" id="gradeDisplay"></div>
            <div id="detailsDisplay"></div>
            <button class="btn" onclick="restartQuiz()">Take Quiz Again</button>
        </div>
    </div>

    <script>
        // Question Database
        const questionDatabase = {
            "Data Structures": [
                {
                    question: "What is the time complexity of inserting an element at the beginning of an array?",
                    options: ["O(1)", "O(n)", "O(log n)", "O(n²)"],
                    correct: 1
                },
                {
                    question: "Which data structure uses LIFO (Last In First Out) principle?",
                    options: ["Queue", "Stack", "Array", "Linked List"],
                    correct: 1
                },
                {
                    question: "What is the maximum number of children a node can have in a binary tree?",
                    options: ["1", "2", "3", "Unlimited"],
                    correct: 1
                },
                {
                    question: "Which operation is NOT efficient in a singly linked list?",
                    options: ["Insertion at beginning", "Deletion at beginning", "Accessing middle element", "Insertion at end"],
                    correct: 2
                },
                {
                    question: "What is the best case time complexity of Quick Sort?",
                    options: ["O(n)", "O(n log n)", "O(n²)", "O(log n)"],
                    correct: 1
                },
                {
                    question: "Which data structure is best for implementing recursion?",
                    options: ["Queue", "Array", "Stack", "Tree"],
                    correct: 2
                },
                {
                    question: "What is a circular queue also known as?",
                    options: ["Ring buffer", "Circular array", "Round queue", "Loop queue"],
                    correct: 0
                },
                {
                    question: "In which data structure is the search operation most efficient?",
                    options: ["Array", "Linked List", "Hash Table", "Stack"],
                    correct: 2
                },
                {
                    question: "What is the space complexity of merge sort?",
                    options: ["O(1)", "O(log n)", "O(n)", "O(n²)"],
                    correct: 2
                },
                {
                    question: "Which tree traversal visits the root node first?",
                    options: ["Inorder", "Preorder", "Postorder", "Level order"],
                    correct: 1
                },
                {
                    question: "What is the minimum number of nodes in a complete binary tree of height h?",
                    options: ["2^h", "2^h - 1", "2^(h-1)", "2^(h+1) - 1"],
                    correct: 2
                },
                {
                    question: "Which data structure is used for BFS traversal?",
                    options: ["Stack", "Queue", "Array", "Tree"],
                    correct: 1
                },
                {
                    question: "What is the time complexity of heap sort?",
                    options: ["O(n)", "O(n log n)", "O(n²)", "O(log n)"],
                    correct: 1
                },
                {
                    question: "In a max heap, the parent node is always:",
                    options: ["Smaller than children", "Greater than or equal to children", "Equal to children", "Random"],
                    correct: 1
                },
                {
                    question: "What is the worst case time complexity of binary search?",
                    options: ["O(1)", "O(n)", "O(log n)", "O(n²)"],
                    correct: 2
                }
            ],
            "Algorithms": [
                {
                    question: "Which algorithm is used to find the shortest path in a weighted graph?",
                    options: ["BFS", "DFS", "Dijkstra's Algorithm", "Prim's Algorithm"],
                    correct: 2
                },
                {
                    question: "What is the principle behind dynamic programming?",
                    options: ["Divide and conquer", "Overlapping subproblems and optimal substructure", "Greedy choice", "Backtracking"],
                    correct: 1
                },
                {
                    question: "Which sorting algorithm has the best average case performance?",
                    options: ["Bubble Sort", "Selection Sort", "Merge Sort", "Insertion Sort"],
                    correct: 2
                },
                {
                    question: "What is the time complexity of the Euclidean algorithm for GCD?",
                    options: ["O(n)", "O(log n)", "O(n²)", "O(1)"],
                    correct: 1
                },
                {
                    question: "Which algorithm uses the 'cut property' of graphs?",
                    options: ["Kruskal's Algorithm", "Dijkstra's Algorithm", "Floyd-Warshall", "Bellman-Ford"],
                    correct: 0
                },
                {
                    question: "What is the space complexity of the recursive Fibonacci algorithm?",
                    options: ["O(1)", "O(n)", "O(log n)", "O(n²)"],
                    correct: 1
                },
                {
                    question: "Which algorithm is used for topological sorting?",
                    options: ["BFS", "DFS", "Both BFS and DFS", "Dijkstra's"],
                    correct: 2
                },
                {
                    question: "What is the main idea behind the KMP string matching algorithm?",
                    options: ["Hashing", "Preprocessing pattern", "Divide and conquer", "Dynamic programming"],
                    correct: 1
                },
                {
                    question: "Which algorithm detects negative cycles in a graph?",
                    options: ["Dijkstra's", "Floyd-Warshall", "Bellman-Ford", "Prim's"],
                    correct: 2
                },
                {
                    question: "What is the time complexity of counting sort?",
                    options: ["O(n + k)", "O(n log n)", "O(n²)", "O(k log k)"],
                    correct: 0
                },
                {
                    question: "Which technique is used in quicksort to choose pivot?",
                    options: ["Always first element", "Always last element", "Random element", "All of the above"],
                    correct: 3
                },
                {
                    question: "What is the optimal solution approach for the 0/1 knapsack problem?",
                    options: ["Greedy", "Dynamic Programming", "Divide and Conquer", "Backtracking"],
                    correct: 1
                },
                {
                    question: "Which algorithm is used to find strongly connected components?",
                    options: ["Tarjan's Algorithm", "Kruskal's Algorithm", "Prim's Algorithm", "Dijkstra's Algorithm"],
                    correct: 0
                },
                {
                    question: "What is the time complexity of the naive string matching algorithm?",
                    options: ["O(n)", "O(m)", "O(n*m)", "O(n + m)"],
                    correct: 2
                },
                {
                    question: "Which sorting algorithm is stable and has O(n log n) time complexity?",
                    options: ["Quick Sort", "Heap Sort", "Merge Sort", "Selection Sort"],
                    correct: 2
                }
            ],
            "Database Management Systems": [
                {
                    question: "What does ACID stand for in database systems?",
                    options: ["Atomicity, Consistency, Isolation, Durability", "Association, Consistency, Isolation, Durability", "Atomicity, Concurrency, Isolation, Durability", "Atomicity, Consistency, Independence, Durability"],
                    correct: 0
                },
                {
                    question: "Which normal form eliminates partial dependencies?",
                    options: ["1NF", "2NF", "3NF", "BCNF"],
                    correct: 1
                },
                {
                    question: "What is a foreign key?",
                    options: ["A key from another table", "A unique identifier", "A primary key in another table", "A reference to primary key of another table"],
                    correct: 3
                },
                {
                    question: "Which SQL command is used to remove a table?",
                    options: ["DELETE", "REMOVE", "DROP", "CLEAR"],
                    correct: 2
                },
                {
                    question: "What is the purpose of indexing in databases?",
                    options: ["To save space", "To speed up queries", "To maintain order", "To ensure uniqueness"],
                    correct: 1
                },
                {
                    question: "Which isolation level allows dirty reads?",
                    options: ["READ UNCOMMITTED", "READ COMMITTED", "REPEATABLE READ", "SERIALIZABLE"],
                    correct: 0
                },
                {
                    question: "What is a deadlock in database systems?",
                    options: ["A crashed transaction", "Two transactions waiting for each other", "A long-running query", "A failed connection"],
                    correct: 1
                },
                {
                    question: "Which join returns all records from both tables?",
                    options: ["INNER JOIN", "LEFT JOIN", "RIGHT JOIN", "FULL OUTER JOIN"],
                    correct: 3
                },
                {
                    question: "What is denormalization?",
                    options: ["Removing normal forms", "Adding redundancy for performance", "Deleting data", "Backup process"],
                    correct: 1
                },
                {
                    question: "Which command is used to modify table structure?",
                    options: ["UPDATE", "MODIFY", "ALTER", "CHANGE"],
                    correct: 2
                },
                {
                    question: "What is a candidate key?",
                    options: ["Any key that can be primary key", "A foreign key", "An index key", "A composite key"],
                    correct: 0
                },
                {
                    question: "Which operator is used for pattern matching in SQL?",
                    options: ["MATCH", "PATTERN", "LIKE", "SIMILAR"],
                    correct: 2
                },
                {
                    question: "What is the purpose of the GROUP BY clause?",
                    options: ["To sort data", "To filter data", "To group rows with same values", "To join tables"],
                    correct: 2
                },
                {
                    question: "Which constraint ensures that a column cannot have NULL values?",
                    options: ["PRIMARY KEY", "UNIQUE", "NOT NULL", "CHECK"],
                    correct: 2
                },
                {
                    question: "What is a view in database?",
                    options: ["A physical table", "A virtual table", "An index", "A backup"],
                    correct: 1
                }
            ],
            "Software Engineering": [
                {
                    question: "Which software development model follows a linear sequential approach?",
                    options: ["Agile", "Waterfall", "Spiral", "RAD"],
                    correct: 1
                },
                {
                    question: "What does UML stand for?",
                    options: ["Universal Modeling Language", "Unified Modeling Language", "Universal Management Language", "Unified Management Language"],
                    correct: 1
                },
                {
                    question: "Which testing technique is based on the internal structure of code?",
                    options: ["Black box testing", "White box testing", "Gray box testing", "Unit testing"],
                    correct: 1
                },
                {
                    question: "What is the main goal of software engineering?",
                    options: ["Writing code", "Systematic development of software", "Testing software", "Documenting software"],
                    correct: 1
                },
                {
                    question: "Which SOLID principle states that classes should be open for extension but closed for modification?",
                    options: ["Single Responsibility", "Open/Closed", "Liskov Substitution", "Interface Segregation"],
                    correct: 1
                },
                {
                    question: "What is refactoring?",
                    options: ["Adding new features", "Improving code structure without changing functionality", "Fixing bugs", "Writing documentation"],
                    correct: 1
                },
                {
                    question: "Which design pattern ensures only one instance of a class exists?",
                    options: ["Factory", "Observer", "Singleton", "Strategy"],
                    correct: 2
                },
                {
                    question: "What is the purpose of version control systems?",
                    options: ["Code compilation", "Track changes in code", "Testing code", "Deploying code"],
                    correct: 1
                },
                {
                    question: "Which phase comes after system design in SDLC?",
                    options: ["Requirements analysis", "Implementation", "Testing", "Maintenance"],
                    correct: 1
                },
                {
                    question: "What is continuous integration?",
                    options: ["Regular code backup", "Frequent code merging and testing", "Daily meetings", "Code documentation"],
                    correct: 1
                },
                {
                    question: "Which diagram shows the interaction between objects over time?",
                    options: ["Class diagram", "Use case diagram", "Sequence diagram", "Activity diagram"],
                    correct: 2
                },
                {
                    question: "What is technical debt?",
                    options: ["Money owed to developers", "Cost of shortcuts in development", "Testing costs", "Documentation costs"],
                    correct: 1
                },
                {
                    question: "Which methodology emphasizes individuals and interactions over processes?",
                    options: ["Waterfall", "Agile", "Spiral", "V-Model"],
                    correct: 1
                },
                {
                    question: "What is pair programming?",
                    options: ["Two computers", "Two programmers working together", "Two projects", "Two teams"],
                    correct: 1
                },
                {
                    question: "Which metric measures the percentage of code covered by tests?",
                    options: ["Cyclomatic complexity", "Code coverage", "Lines of code", "Function points"],
                    correct: 1
                }
            ],
            "Computer Graphics": [
                {
                    question: "What does RGB stand for?",
                    options: ["Red Green Blue", "Really Good Colors", "Rapid Graphics Buffer", "Raster Graphics Base"],
                    correct: 0
                },
                {
                    question: "Which algorithm is used for line drawing?",
                    options: ["Bresenham's Algorithm", "Dijkstra's Algorithm", "Floyd's Algorithm", "Prim's Algorithm"],
                    correct: 0
                },
                {
                    question: "What is the purpose of z-buffer in 3D graphics?",
                    options: ["Color storage", "Depth testing", "Texture mapping", "Lighting calculations"],
                    correct: 1
                },
                {
                    question: "Which transformation preserves angles and lengths?",
                    options: ["Scaling", "Rotation", "Translation", "Shearing"],
                    correct: 1
                },
                {
                    question: "What is anti-aliasing?",
                    options: ["Adding noise", "Reducing jagged edges", "Increasing brightness", "Color correction"],
                    correct: 1
                },
                {
                    question: "Which color model is device-independent?",
                    options: ["RGB", "CMYK", "HSV", "CIE XYZ"],
                    correct: 3
                },
                {
                    question: "What is ray tracing used for?",
                    options: ["2D graphics", "Realistic rendering", "Vector graphics", "Image compression"],
                    correct: 1
                },
                {
                    question: "Which primitive is used to represent curves?",
                    options: ["Polygon", "Bezier curve", "Line segment", "Circle"],
                    correct: 1
                },
                {
                    question: "What is the purpose of viewport transformation?",
                    options: ["3D to 2D conversion", "Window to screen mapping", "Color conversion", "Texture mapping"],
                    correct: 1
                },
                {
                    question: "Which lighting model is simplest?",
                    options: ["Phong", "Gouraud", "Lambert", "Blinn-Phong"],
                    correct: 2
                },
                {
                    question: "What is texture mapping?",
                    options: ["Color blending", "Applying images to surfaces", "Shadow calculation", "Light reflection"],
                    correct: 1
                },
                {
                    question: "Which algorithm is used for polygon filling?",
                    options: ["Scan line algorithm", "Bresenham's algorithm", "Cohen-Sutherland algorithm", "Liang-Barsky algorithm"],
                    correct: 0
                },
                {
                    question: "What is the purpose of clipping?",
                    options: ["Adding effects", "Removing parts outside view", "Color correction", "Size adjustment"],
                    correct: 1
                },
                {
                    question: "Which matrix is used for perspective projection?",
                    options: ["Identity matrix", "Rotation matrix", "Projection matrix", "Translation matrix"],
                    correct: 2
                },
                {
                    question: "What is frame buffer?",
                    options: ["CPU cache", "Memory storing pixel data", "Graphics card", "Display monitor"],
                    correct: 1
                }
            ]
        };

        // Quiz State
        let currentUser = null;
        let selectedQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let timeLeft = 30;
        let timer = null;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
        });

        function handleLogin(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (username && password === 'ituser123') {
                currentUser = username;
                showQuizPage();
            } else {
                document.getElementById('loginError').classList.remove('hidden');
            }
        }

        function showQuizPage() {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('quizPage').classList.remove('hidden');
            initializeQuiz();
        }

        function initializeQuiz() {
            // Select 15 random questions from all subjects (3 from each)
            selectedQuestions = [];
            const subjects = Object.keys(questionDatabase);
            
            subjects.forEach(subject => {
                const subjectQuestions = [...questionDatabase[subject]];
                // Shuffle and take 3 questions from each subject
                for (let i = subjectQuestions.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [subjectQuestions[i], subjectQuestions[j]] = [subjectQuestions[j], subjectQuestions[i]];
                }
                
                for (let i = 0; i < 3; i++) {
                    selectedQuestions.push({
                        ...subjectQuestions[i],
                        subject: subject
                    });
                }
            });

            // Shuffle the selected questions
            for (let i = selectedQuestions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [selectedQuestions[i], selectedQuestions[j]] = [selectedQuestions[j], selectedQuestions[i]];
            }

            userAnswers = new Array(15).fill(null);
            currentQuestionIndex = 0;
            displayQuestion();
            startTimer();
        }

        function displayQuestion() {
            const question = selectedQuestions[currentQuestionIndex];
            
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('subjectTag').textContent = question.subject;
            document.getElementById('questionText').textContent = question.question;
            
            const optionsList = document.getElementById('optionsList');
            optionsList.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const li = document.createElement('li');
                li.className = 'option';
                li.onclick = () => selectOption(index);
                
                li.innerHTML = `
                    <div class="option-content">
                        <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                        <div>${option}</div>
                    </div>
                `;
                
                if (userAnswers[currentQuestionIndex] === index) {
                    li.classList.add('selected');
                }
                
                optionsList.appendChild(li);
            });

            // Update progress bar
            const progressPercent = ((currentQuestionIndex) / 15) * 100;
            document.getElementById('progressFill').style.width = progressPercent + '%';

            // Update navigation buttons
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            document.getElementById('nextBtn').textContent = currentQuestionIndex === 14 ? 'Finish' : 'Next';
        }

        function selectOption(optionIndex) {
            userAnswers[currentQuestionIndex] = optionIndex;
            
            // Update UI
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.classList.remove('selected'));
            options[optionIndex].classList.add('selected');
        }

        function startTimer() {
            timeLeft = 30;
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    nextQuestion();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            document.getElementById('timer').textContent = timeLeft;
            
            // Change color based on time left
            const timerElement = document.getElementById('timer');
            if (timeLeft <= 5) {
                timerElement.style.background = 'rgba(220, 53, 69, 0.8)';
            } else if (timeLeft <= 10) {
                timerElement.style.background = 'rgba(255, 193, 7, 0.8)';
            } else {
                timerElement.style.background = 'rgba(255,255,255,0.2)';
            }
        }

        function nextQuestion() {
            clearInterval(timer);
            
            if (currentQuestionIndex < 14) {
                currentQuestionIndex++;
                displayQuestion();
                startTimer();
            } else {
                showResults();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                clearInterval(timer);
                currentQuestionIndex--;
                displayQuestion();
                startTimer();
            }
        }

        function showResults() {
            clearInterval(timer);
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.remove('hidden');
            
            // Calculate score
            let correctAnswers = 0;
            let subjectWise = {};
            
            selectedQuestions.forEach((question, index) => {
                const subject = question.subject;
                if (!subjectWise[subject]) {
                    subjectWise[subject] = { correct: 0, total: 0 };
                }
                subjectWise[subject].total++;
                
                if (userAnswers[index] === question.correct) {
                    correctAnswers++;
                    subjectWise[subject].correct++;
                }
            });
            
            const percentage = Math.round((correctAnswers / 15) * 100);
            
            // Display score
            document.getElementById('scoreDisplay').textContent = `${correctAnswers}/15 (${percentage}%)`;
            
            // Determine grade
            let gradeText = '';
            let gradeClass = '';
            
            if (percentage >= 90) {
                gradeText = 'Excellent! 🏆';
                gradeClass = 'excellent';
            } else if (percentage >= 75) {
                gradeText = 'Good! 👍';
                gradeClass = 'good';
            } else if (percentage >= 60) {
                gradeText = 'Average 📚';
                gradeClass = 'average';
            } else {
                gradeText = 'Needs Improvement 📖';
                gradeClass = 'poor';
            }
            
            const gradeElement = document.getElementById('gradeDisplay');
            gradeElement.textContent = gradeText;
            gradeElement.className = `grade ${gradeClass}`;
            
            // Show subject-wise performance
            let detailsHTML = '<h3>Subject-wise Performance:</h3>';
            for (const subject in subjectWise) {
                const subjectPercentage = Math.round((subjectWise[subject].correct / subjectWise[subject].total) * 100);
                detailsHTML += `
                    <div style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                        <strong>${subject}:</strong> ${subjectWise[subject].correct}/${subjectWise[subject].total} (${subjectPercentage}%)
                    </div>
                `;
            }
            
            document.getElementById('detailsDisplay').innerHTML = detailsHTML;
        }

        function restartQuiz() {
            // Reset all variables
            currentQuestionIndex = 0;
            userAnswers = [];
            selectedQuestions = [];
            timeLeft = 30;
            
            // Hide results and show quiz
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById('quizPage').classList.remove('hidden');
            
            // Initialize new quiz
            initializeQuiz();
        }
 </script>
</body>
</html>
